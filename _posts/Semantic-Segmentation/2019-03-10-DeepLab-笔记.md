---
layout: post
title: DeepLab 笔记
category: 语义分割
tags: deeplab
description:
---

## 一、背景

DCNN 存在的问题：

1. 多次下采样使输出信号分辨率变小 —— 空洞卷积
2. 池化对输入变换具有内在空间不变性 —— CRF

## 感受野

感受野被定义为卷积神经网络特征所能看到输入图像的区域，换句话说特征输出受感受野区域内的像素点的影响。

比如下图（该图为了方便，将二维简化为一维），这个三层的神经卷积神经网络，每一层卷积核的kernel_size = 3 ，stride = 1，那么最上层特征所对应的感受野就为如图所示的7x7。

<center>

<img src="https://raw.githubusercontent.com/chiemon/chiemon.github.io/master/img/DeepLab/v1-1.png">

</center>

感受野计算公式：

$$RF_{l+1} = RF_{l} + \left( kernel\_size_{l+1} - 1 \right) \times feature\_stride_{l}$$

其中：RF 表示特征感受野大小，l 表示层数，$feature\_stride_{l} = \prod_{i=1}^{l} stride_{i}$ 表示输入层，$RF_{0} = 1$，$feature\_stride_{0} = 1$。

- 第一层特征，感受野为 3

$$RF_{1} = RF_{0} + \left( kernel\_size_{1} - 1 \right) \times feature\_stride_{0} = 1 + \left( 3 - 1\right) \times 1 = 3$$

<center>

<img src="https://raw.githubusercontent.com/chiemon/chiemon.github.io/master/img/DeepLab/v1-2.png">

</center>

- 第二层特征，感受野为 5

$$RF_{2} = RF_{1} + \left( kernel\_size_{2} - 1 \right) \times feature\_stride_{1} = 3 + \left( 3 - 1\right) \times 1 = 5$$

<center>

<img src="https://raw.githubusercontent.com/chiemon/chiemon.github.io/master/img/DeepLab/v1-3.png">

</center>

- 第三层特征，感受野为 7

$$RF_{3} = RF_{2} + \left( kernel\_size_{3} - 1 \right) \times feature\_stride_{2} = 5 + \left( 3 - 1\right) \times 1 = 5$$

<center>

<img src="https://raw.githubusercontent.com/chiemon/chiemon.github.io/master/img/DeepLab/v1-3.png">

</center>

## 空洞卷积

空洞卷积的感受野

<center>

<img src="https://raw.githubusercontent.com/chiemon/chiemon.github.io/master/img/DeepLab/v1-4.png">

</center>

## CRF

## DeepLab V1

### 解决的问题

降采样会导致分辨率的降低，但减少池化层会改变原先 DCNN 的结构，不能用以前的结构参数进行 fine-tune。

### 网络结构

<center>

<img src="https://raw.githubusercontent.com/chiemon/chiemon.github.io/master/img/DeepLab/v1-10.png">

</center>

上图为 VGG 网络，DeepLab v1 在此网络上修改。将 VGG 网络的 pool4 和 pool5 层的 stride 由原来的 2 改为 1，再加上 1 padding。使得 vgg 网络总的 stride 由原来的 32 变成 8。





## DeepLab V2

### 网络结构

## DeepLab V3

### 网络结构

## DeepLab V3+

### 网络结构
